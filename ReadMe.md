## Kymograph generation and analysis for E. coli midcell flourescence

The general workflow for these scripts are as follows.
- Install the Pure_Denoise plugin for FIJI.
- Run the macro "BatchProcess_Denoise" on the selected directory of movie files for your data. This will help remove background signal for kymograph generation.
- Inspect your denoised movies and look for signal fluctuation mid-cell indicitive of treadmilling or movement dynamics. 
  - Once you find a potential cell, draw a square ROI around it.
  - Run the macro "KymoPrep." This macro will prepare the square ROI for kymograph generation.
    - It will duplicate the ROI, making a second copy.
    - This second copy will have its "size" increased by four with a bicubic interpolation.
    - It will then run a 4-frame walking average. This will help identify any dynamics present.
    - A max-intensity Z projection will be displayed of the cell.
  - The macro will prompt the user to draw a line ROI. Draw this line over the mid-cell region of the max-intensity projection.
  - The macro will finally use this line ROI to generate a kymograph. It will save the kymograph according to the movie number and kymograph number. That is, "Kymo-05-03" will be the third kymograph generated by movie 5.
- Once all your kymographs are generated for a particular movie, **save all generated ROIs** so that the user can refer back to any source cell a kymograph is generated from.


Ideally, you want to build your directories such that the main folders are "yyyymmdd-ExperimentDescription." The next part of my pipelin will assume you are in a parent directory with these experiment subfolders present.
- Open "Pool_Kymographs.mat" in Matlab.
- Input your strain number. This will be your primary reference handle for all parts of future analysis, and it's good for data management.
- This script will go into all experiment directories by date. It will identify all kymographs and pool them together into a single array named **STRAIN.mat**.


Once this strain structure is prepared, you are ready for kymograph analysis. 
- Open "Blinded_Kymo_Segmentation.mat" in Matlab. This assumes your directory now has a subfolder named "DataSets" where all the matlab dataframes are stored.
- If you wish to concatenate and mix several strains together for a blinded analysis, run section 1. It will make a single structure and randomize all the data.
- Section 2 will allow you to check the current index of segmentation you're on. 
- Section 3 is the segmentation portion. Update your index one at a time. It will pull up a figure window and prompt you to select segments of movement you identify in each kymograph. Both the left and right kymograph are the same. I just apply a different color lookup table to each to help you screen them.
- I have provided a test file, XY505. It is TB28 carrying pXYE2(*aph* *lacI* *ftsZ-gfp*). It has been segmented already, but it is an example of how kymographs are collected and pooled.
